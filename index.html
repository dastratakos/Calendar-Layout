<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calendar Layout Demo</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="header">
    <button class="theme-toggle" id="themeToggle">
      <span class="theme-icon" id="themeIcon">ðŸŒ™</span>
      <span id="themeText">Dark Mode</span>
    </button>
  </div>
  <div class="time-labels" id="time-labels"></div>
  <div class="calendar-container">
    <div class="calendar" id="calendar"></div>
  </div>

  <script src="theme.js"></script>
  <script src="dayLayout.js"></script>
  <script src="calendarRenderer.js"></script>
  <script>
    // Initialize theme toggle when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      new ThemeToggle();
    });

    // Generate sample events
    const events = Array.from({ length: 50 }, (_, i) => {
      const start = Math.floor(Math.random() * (1440 - 60));
      const end = start + Math.floor(30 + Math.random() * 90);
      return {
        id: 0,
        title: "X",
        location: `Room ${String.fromCharCode(65 + (i % 26))}`,
        start,
        end: Math.min(end, 1440)
      };
    }).sort((a, b) => {
      if (a.start !== b.start) return a.start - b.start;
      return b.end - a.end;
    }).map((event, idx) => {
      event.id = idx + 1;
      event.title = `Event ${idx + 1}`;
      return event;
    });

    // Initialize calendar
    const calendar = new CalendarRenderer();
    calendar.render(events);

    // Update current time line every minute
    setInterval(() => {
      const oldLine = document.querySelector(".current-time-line");
      const oldLabel = document.querySelector(".current-time-label");
      if (oldLine) oldLine.remove();
      if (oldLabel) oldLabel.remove();
      calendar.renderCurrentTimeLine();
    }, 60000);
  </script>
</body>

</html>